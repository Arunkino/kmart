{% extends 'admin/admin_theme.html' %}
{% load static %}


                {% block content %}
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">Dashboard</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item active"></li>
                        </ol>
                        <div class="row">
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-primary text-white mb-4">
                                    <div class="card-body">Total sales</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="#">View Details</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-warning text-white mb-4">
                                    <div class="card-body">Visitors</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="#">View Details</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-success text-white mb-4">
                                    <div class="card-body">Sales Report</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="{% url 'sales_report' %}">View Details</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-danger text-white mb-4">
                                    <div class="card-body">Users</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" href="{% url 'admin_userlist' %}">View Details</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row p-4 ">
                            <div class="col-xl-3 col-md-4">
                              <div class="card bg-secondary text-white mb-4">
                                  <div class="card-body">sample 1</div>
                                  
                              </div>
                            </div>

                            <div class="col-xl-3 col-md-4">
                              <div class="card bg-secondary text-white mb-4">
                                  <div class="card-body">sample 2</div>
                                  
                              </div>
                            </div>

                            <div class="col-xl-3 col-md-4">
                              <div class="card bg-secondary text-white mb-4">
                                  <div class="card-body">sample 3</div>
                                  
                              </div>
                            </div>

                            <div class="col-xl-3 col-md-4">
                              <div class="card bg-secondary text-white mb-4">
                                  <div class="card-body">sample 1</div>
                                  
                              </div>
                            </div>

                            <div class="col-xl-3 col-md-4">
                              <div class="card bg-secondary text-white mb-4">
                                  <div class="card-body">sample 1</div>
                                  
                              </div>
                            </div>

                        </div>
                        
                        <div class="row mt-4 ">

                          

                            <div class="col-md-2 bg-light p-1  rounded shadow" style="height: auto;">
                                <ul class="list-group">
                                  <button class="btn rounded-4 "><li class="list-group-item active" data-range="10">Last 10 Days</li></button>
                                  <button class="btn rounded-4"><li class="list-group-item" data-range="week">Last Week</li></button>
                                  <button class="btn rounded-4"><li class="list-group-item" data-range="month">Last Month</li></button>
                                  <button class="btn rounded-4"><li class="list-group-item"data-range="year">Last Year</li></button>
                                  
                                  
                                </ul>
                            </div>

                            








                           

                            <div class=" col-md-8">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <i class="fas fa-chart-area me-1"></i>
                                        Revenue Chart
                                    </div>
                                    <div class="card-body"><canvas id="myChart" width="100%" height="40"></canvas></div>
                                </div>
                            </div>

                            <!-- <div class="col-md-2 bg-light p-1  rounded shadow" style="height: auto;">
                              <ul class="list-group">
                                <button class="btn rounded-4 "><li class="list-group-item active" data-range="10">Last 10 Days</li></button>
                                <button class="btn rounded-4"><li class="list-group-item" data-range="week">Last Week</li></button>
                                <button class="btn rounded-4"><li class="list-group-item" data-range="month">Last Month</li></button>
                                <button class="btn rounded-4"><li class="list-group-item"data-range="year">Last Year</li></button>
                                
                                
                              </ul>
                            </div> -->



                        </div>

                        <div class="row">
                          <div class=" col-md-8 offset-md-2">
                            <div class="card mb-4">
                              <div class="card-header">
                                  <i class="fas fa-chart-area me-1"></i>
                                  Area Chart Order
                              </div>
                              <div class="card-body"><canvas id="order-chart-area" width="100%" height="40"></canvas></div>
                          </div>
                          </div>
                      </div>
                      
                        
                    </div>
              
                    
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

                                        
<script>
 // Initial data
var labels = {{ label|safe }};
var data = {{ data|safe }};
var data_revenue = {{ data_revenue|safe }};

// Get the context of the canvas
var ctxBar = document.getElementById('myChart').getContext('2d');
var ctxArea = document.getElementById('order-chart-area').getContext('2d');

// Create the bar chart
var myBarChart = new Chart(ctxBar, {
    type: 'bar',
    data: {
        labels: labels,
        datasets: [{
            label: 'Revenue',
            data: data_revenue,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Create the area chart
var myAreaChart = new Chart(ctxArea, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: 'Count',
            data: data,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Add click event listener to the list items
$(".list-group-item").click(function(){
    $(".list-group-item").removeClass("active");
    $(this).addClass("active");

    var date_range = $(this).data('range');

    $.ajax({
        url: "{% url 'chart_date_index' %}",
        data: {
            'date_range': date_range
        },
        dataType: 'json',
        success: function (data) {
            // Update the bar chart's data
            myBarChart.data.labels = data.label;
            myBarChart.data.datasets[0].data = data.data_revenue;

            // Update the area chart's data
            myAreaChart.data.labels = data.label;
            myAreaChart.data.datasets[0].data = data.data;

            // Redraw the charts
            myBarChart.update();
            myAreaChart.update();
        }
    });
});


</script>
                    {% endblock %}
